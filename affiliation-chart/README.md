# 在籍期間タイムライン生成ツール

Wikipedia にあるアイドルグループの記事の、在籍期間画像を生成するツールです。

## 使用例

* [クマリデパート 2020年11月現在](https://nabetani-z.github.io/affiliation-chart/?json=%7B%22members%22%3A%5B%7B%22name%22%3A%22%E6%97%A9%E6%A1%9C%20%E3%83%8B%E3%82%B3%22%2C%22in%22%3A%222016%E5%B9%B44%E6%9C%8810%E6%97%A5%22%2C%22color%22%3A%22%239ED0F1%22%7D%2C%7B%22name%22%3A%22%E5%84%AA%E9%9B%A8%20%E3%83%8A%E3%82%B3%22%2C%22in%22%3A%222016%E5%B9%B44%E6%9C%8810%E6%97%A5%22%2C%22color%22%3A%22%23E7ABC7%22%7D%2C%7B%22name%22%3A%22%E7%BE%BD%E4%BA%95%20%E3%83%AA%E3%82%B5%E3%82%B3%22%2C%22in%22%3A%222016%E5%B9%B44%E6%9C%8810%E6%97%A5%22%2C%22out%22%3A%222018%E5%B9%B45%E6%9C%883%E6%97%A5%E5%8D%92%E6%A5%AD%22%2C%22color%22%3A%22black%22%7D%2C%7B%22name%22%3A%22%E5%B0%8F%E7%94%B0%20%E3%82%A2%E3%83%A4%E3%83%8D%22%2C%22in%22%3A%222018%E5%B9%B45%E6%9C%883%E6%97%A5%E5%8A%A0%E5%85%A5%22%2C%22color%22%3A%22%23D12D48%22%7D%2C%7B%22name%22%3A%22%E6%A5%93%20%E3%83%95%E3%82%A6%E3%82%AB%22%2C%22in%22%3A%222018%E5%B9%B45%E6%9C%883%E6%97%A5%E5%8A%A0%E5%85%A5%22%2C%22color%22%3A%22white%22%2C%22border_color%22%3A%22black%22%7D%2C%7B%22name%22%3A%22%E6%AF%94%E5%A5%88%20%E3%83%9F%E3%83%84%E3%83%90%22%2C%22in%22%3A%222018%E5%B9%B45%E6%9C%883%E6%97%A5%E5%8A%A0%E5%85%A5%22%2C%22out%22%3A%222018%E5%B9%B46%E6%9C%888%E6%97%A5%E8%84%B1%E9%80%80%E3%80%82%22%2C%22color%22%3A%22black%22%7D%2C%7B%22name%22%3A%22%E5%B1%B1%E4%B9%83%20%E3%83%A1%E3%82%A4%22%2C%22in%22%3A%222020%E5%B9%B47%E6%9C%8823%E6%97%A5%E3%81%8A%E6%8A%AB%E9%9C%B2%E7%9B%AE%E3%83%A9%E3%82%A4%E3%83%96%22%2C%22color%22%3A%22%23FDF69C%22%7D%2C%7B%22name%22%3A%22%E4%B8%83%E7%80%AC%20%E3%83%9E%E3%83%8A%22%2C%22in%22%3A%222020%E5%B9%B47%E6%9C%8823%E6%97%A5%E3%81%8A%E6%8A%AB%E9%9C%B2%E7%9B%AE%E3%83%A9%E3%82%A4%E3%83%96%22%2C%22color%22%3A%22%23B8EECE%22%7D%5D%2C%22events%22%3A%5B%7B%22t%22%3A%222017%E5%B9%B44%E6%9C%8826%E6%97%A5%22%2C%22label%22%3A%22S%22%2C%22color%22%3A%22green%22%7D%2C%7B%22t%22%3A%222017%E5%B9%B48%E6%9C%8826%E6%97%A5%22%2C%22label%22%3A%22(s)%22%2C%22color%22%3A%22green%22%7D%2C%7B%22t%22%3A%222017%E5%B9%B412%E6%9C%882%E6%97%A5%22%2C%22label%22%3A%22(s)%22%2C%22color%22%3A%22green%22%7D%2C%7B%22t%22%3A%222018%E5%B9%B49%E6%9C%8825%E6%97%A5%22%2C%22label%22%3A%22S%22%2C%22color%22%3A%22green%22%7D%2C%7B%22t%22%3A%222019%E5%B9%B41%E6%9C%8822%E6%97%A5%22%2C%22label%22%3A%22S%22%2C%22color%22%3A%22green%22%7D%2C%7B%22t%22%3A%222019%E5%B9%B411%E6%9C%885%E6%97%A5%22%2C%22label%22%3A%22S%22%2C%22color%22%3A%22green%22%7D%2C%7B%22t%22%3A%222020%E5%B9%B43%E6%9C%883%E6%97%A5%22%2C%22label%22%3A%22S%22%2C%22color%22%3A%22green%22%7D%2C%7B%22t%22%3A%222020%E5%B9%B48%E6%9C%8818%E6%97%A5%22%2C%22label%22%3A%22S%22%2C%22color%22%3A%22green%22%7D%2C%7B%22t%22%3A%222018%E5%B9%B44%E6%9C%8811%E6%97%A5%22%2C%22label%22%3A%22a%22%2C%22color%22%3A%22%2307a%22%7D%2C%7B%22t%22%3A%222019%E5%B9%B45%E6%9C%8828%E6%97%A5%22%2C%22label%22%3A%22A%22%2C%22color%22%3A%22blue%22%7D%5D%2C%22end%22%3A%222020-11-5%22%7D)
* [アップアップガールズ(2) 2020年11月現在](https://nabetani-z.github.io/affiliation-chart/?json=%7B%22members%22%3A%5B%7B%22name%22%3A%22%E6%A9%8B%E6%9D%91%20%E7%90%86%E5%AD%90%22%2C%22in%22%3A%222017%E5%B9%B42%E6%9C%8825%E6%97%A5%22%2C%22out%22%3A%222019%E5%B9%B47%E6%9C%8829%E6%97%A5%22%7D%2C%7B%22name%22%3A%22%E9%AB%99%E8%90%A9%20%E5%8D%83%E5%A4%8F%22%2C%22in%22%3A%222017%E5%B9%B42%E6%9C%8825%E6%97%A5%22%7D%2C%7B%22name%22%3A%22%E5%90%89%E5%B7%9D%20%E8%8C%89%E5%84%AA%22%2C%22in%22%3A%222017%E5%B9%B42%E6%9C%8825%E6%97%A5%22%7D%2C%7B%22name%22%3A%22%E9%8D%9B%E6%B2%BB%E5%B3%B6%20%E5%BD%A9%22%2C%22in%22%3A%222017%E5%B9%B42%E6%9C%8825%E6%97%A5%22%7D%2C%7B%22name%22%3A%22%E4%B8%AD%E6%B2%96%20%E5%87%9C%22%2C%22in%22%3A%222017%E5%B9%B43%E6%9C%8818%E6%97%A5%22%2C%22out%22%3A%222018%E5%B9%B412%E6%9C%8831%E6%97%A5%22%7D%2C%7B%22name%22%3A%22%E4%B8%AD%E5%B7%9D%20%E5%8D%83%E5%B0%8B%22%2C%22in%22%3A%222018%E5%B9%B44%E6%9C%8821%E6%97%A5%22%7D%2C%7B%22name%22%3A%22%E4%BD%90%E3%80%85%E6%9C%A8%20%E3%81%BB%E3%81%AE%E3%81%8B%22%2C%22in%22%3A%222018%E5%B9%B44%E6%9C%8821%E6%97%A5%22%7D%2C%7B%22name%22%3A%22%E6%A3%AE%E6%B0%B8%20%E6%96%B0%E8%8F%9C%22%2C%22in%22%3A%222019%E5%B9%B43%E6%9C%883%E6%97%A5%22%7D%2C%7B%22name%22%3A%22%E5%B3%B6%E5%B4%8E%20%E5%8F%8B%E8%8E%89%E4%BA%9C%22%2C%22in%22%3A%222019%E5%B9%B43%E6%9C%883%E6%97%A5%22%7D%2C%7B%22name%22%3A%22%E6%96%B0%E5%80%89%20%E6%84%9B%E6%B5%B7%22%2C%22in%22%3A%222019%E5%B9%B43%E6%9C%883%E6%97%A5%22%7D%5D%2C%22events%22%3A%5B%7B%22label%22%3A%22S%22%2C%22t%22%3A%222017%E5%B9%B48%E6%9C%8815%E6%97%A5%22%2C%22color%22%3A%22red%22%7D%2C%7B%22label%22%3A%22S%22%2C%22t%22%3A%222018%E5%B9%B41%E6%9C%881%E6%97%A5%22%2C%22color%22%3A%22red%22%7D%2C%7B%22label%22%3A%22S%22%2C%22t%22%3A%222018%E5%B9%B45%E6%9C%881%E6%97%A5%22%2C%22color%22%3A%22red%22%7D%2C%7B%22label%22%3A%22S%22%2C%22t%22%3A%222018%E5%B9%B48%E6%9C%887%E6%97%A5%22%2C%22color%22%3A%22red%22%7D%2C%7B%22label%22%3A%22S%22%2C%22t%22%3A%222018%E5%B9%B412%E6%9C%8825%E6%97%A5%22%2C%22color%22%3A%22red%22%7D%2C%7B%22label%22%3A%22S%22%2C%22t%22%3A%222019%E5%B9%B44%E6%9C%882%E6%97%A5%22%2C%22color%22%3A%22red%22%7D%2C%7B%22label%22%3A%22S%22%2C%22t%22%3A%222019%E5%B9%B48%E6%9C%8813%E6%97%A5%22%2C%22color%22%3A%22red%22%7D%2C%7B%22label%22%3A%22S%22%2C%22t%22%3A%222020%E5%B9%B41%E6%9C%887%E6%97%A5%22%2C%22color%22%3A%22red%22%7D%2C%7B%22label%22%3A%22S%22%2C%22t%22%3A%222020%E5%B9%B410%E6%9C%884%E6%97%A5%22%2C%22color%22%3A%22red%22%7D%2C%7B%22label%22%3A%22A%22%2C%22t%22%3A%222019%E5%B9%B411%E6%9C%8812%E6%97%A5%22%2C%22color%22%3A%22green%22%7D%5D%2C%22end%22%3A%222020-11-5%22%7D)
* [tipToe. 2020年11月現在](https://nabetani-z.github.io/affiliation-chart/?json=%7B%22members%22%3A%5B%7B%22name%22%3A%22%E8%8A%B1%E5%92%B2%E3%81%AA%E3%81%A4%E3%81%BF%22%2C%22in%22%3A%222016%E5%B9%B412%E6%9C%8810%E6%97%A5%22%2C%22out%22%3A%222020%E5%B9%B41%E6%9C%8811%E6%97%A5%22%2C%22color%22%3A%22pink%22%7D%2C%7B%22name%22%3A%22%E9%83%BD%E5%A1%9A%E5%AF%A7%E3%80%85%22%2C%22in%22%3A%222016%E5%B9%B412%E6%9C%8810%E6%97%A5%22%2C%22out%22%3A%222020%E5%B9%B41%E6%9C%8811%E6%97%A5%22%2C%22color%22%3A%22white%22%2C%22border_color%22%3A%22black%22%7D%2C%7B%22name%22%3A%22%E4%B8%89%E5%8E%9F%E6%B5%B7%22%2C%22in%22%3A%222016%E5%B9%B412%E6%9C%8810%E6%97%A5%22%2C%22out%22%3A%222020%E5%B9%B41%E6%9C%8811%E6%97%A5%22%2C%22color%22%3A%22aqua%22%7D%2C%7B%22name%22%3A%22%E6%A4%8B%E6%9C%AC%E7%9C%9F%E5%8F%B6%22%2C%22in%22%3A%222017%E5%B9%B47%E6%9C%8817%E6%97%A5%22%2C%22out%22%3A%222020%E5%B9%B41%E6%9C%8811%E6%97%A5%22%2C%22color%22%3A%22purple%22%7D%2C%7B%22name%22%3A%22%E6%97%A5%E9%87%8E%E3%81%82%E3%81%BF%22%2C%22in%22%3A%222017%E5%B9%B47%E6%9C%8817%E6%97%A5%22%2C%22color%22%3A%22%23FFCC77%22%7D%2C%7B%22name%22%3A%22%E6%88%90%E7%80%AC%E3%82%86%E3%82%86%E3%81%8B%22%2C%22color%22%3A%22red%22%2C%22enrollments%22%3A%5B%7B%22in%22%3A%222016%E5%B9%B412%E6%9C%8810%E6%97%A5%22%2C%22out%22%3A%222017.6.24%22%7D%2C%7B%22in%22%3A%222018%E5%B9%B43%E6%9C%8818%E6%97%A5%22%2C%22out%22%3A%222020%E5%B9%B41%E6%9C%8811%E6%97%A5%22%7D%5D%7D%2C%7B%22name%22%3A%22%E6%9C%AA%E6%B3%A2%E3%81%82%E3%81%84%E3%82%8A%22%2C%22in%22%3A%222020%E5%B9%B46%E6%9C%8810%E6%97%A5%22%2C%22color%22%3A%22%2399DDFF%22%7D%2C%7B%22name%22%3A%22%E6%82%A0%E6%9C%A8%E3%81%86%E3%81%9F%22%2C%22in%22%3A%222020%E5%B9%B46%E6%9C%8810%E6%97%A5%22%2C%22color%22%3A%22%23AADDAA%22%7D%2C%7B%22name%22%3A%22%E5%AE%AE%E5%9C%92%E3%82%86%E3%81%86%E3%81%8B%22%2C%22in%22%3A%222020%E5%B9%B49%E6%9C%8827%E6%97%A5%22%2C%22color%22%3A%22%23FA5858%22%7D%5D%2C%22end%22%3A%222020-11-5%22%7D)


## 使い方

### 0. サーバにアクセスする

https://nabetani-z.github.io/affiliation-chart

で使えます。

### 1. json を用意する

文字コードは UTF-8 にしてください。

json の内容はこんな感じです。

```json
{
  "width": 1600,
  "height": 500,
  "end": "2019.12.24",
  "members": [
    {
      "name": "最後までいた初期メン",
      "in": "2016年1月1日",
      "color": "green"
    },
    {
      "name": "半年で卒業した初期メン",
      "in": "2016年1月1日",
      "out": "2016年7月12日",
      "color": "white",
      "border_color": "black"
    },
    {
      "name": "途中加入で最後までいた人",
      "in": "2016年4月7日",
      "color": "red"
    },
    {
      "name": "途中加入ですぐ卒業した人",
      "in": "2016年4月7日",
      "out": "2016年4月28日",
      "color": "#00f"
    },
    {
      "name": "一年ぐらいで卒業した人",
      "in": "２０１７年９月６日",
      "out": "２０１８年９月３１日",
      "color": "#00ffee"
    },
    {
      "name": "卒業したあとで復帰して卒業した人",
      "color": "violet",
      "enrollments": [
        {
          "in": "2016.5.6",
          "out": "2017.12.20"
        },
        {
          "in": "2018.8.1",
          "out": "2019.8.2"
        }
      ]
    },
    {
      "name": "卒業したあとで復帰して、担当カラーが変わった人",
      "enrollments": [
        {
          "in": "2016.5.6",
          "out": "2017.7.1",
          "color": "aqua"
        },
        {
          "in": "2018.3.15",
          "color": "yellow",
          "border_color": "black"
        }
      ]
    }
  ],
  "events": [
    {
      "label": "1S",
      "t": "2016.6.15",
      "color": "brown"
    },
    {
      "label": "2S",
      "t": "2017年4月14日",
      "color": "brown"
    },
    {
      "label": "3S",
      "t": "2018.6.1",
      "color": "brown"
    },
    {
      "label": "M1A",
      "t": "2019.1.15",
      "color": "darkblue"
    },
    {
      "label": "M1S",
      "t": "2019.6.1",
      "color": "brown"
    },
    {
      "label": "M2A",
      "t": "2019.11.15",
      "color": "darkblue"
    }
  ]
}
```

json 内の要素は下表のとおりです。

|要素|説明|省略時|
|:--|:--|:--|
|width|出力画像の横幅。ピクセル単位。|1600|
|height|出力画像の縦幅。ピクセル単位。|適当に計算する|
|end|グラフの右端の日付|画像を作った日|
|members|メンバ情報の配列|省略不可|
|events|イベント情報の配列|省略可|

メンバ情報は加入時期が連続であるパターンと不連続であるパターンがあります。

連続の場合は下表のとおりです。
|要素|説明|省略時|
|:--|:--|:--|
|color|グラフの色|`rgb(0,0,255)`|
|border_color|グラフの枠線の色|枠線なし|
|in|加入年月日|省略不可|
|out|卒業年月日|グラフの右端までバーが伸びる|

加入時期が不連続の場合は下表のとおりです。

|要素|説明|省略時|
|:--|:--|:--|
|color|グラフの色を省略した場合の色|`rgb(0,0,255)`|
|border_color|グラフの枠線の色を省略した場合の色|枠線なし|
|border|グラフの枠線の色|枠線なし|
|enrollments\[\*\].in|加入年月日|省略不可|
|enrollments\[\*\].out|(一旦)卒業した年月日|グラフの右端までバーが伸びる|
|enrollments\[\*\].color|その加入時期のグラフの色|member\[\*\].color|
|enrollments\[\*\].border_color|グラフの枠線の色を省略した場合の色|member\[\*\].border_color|


イベント情報は下表のとおりです。
|要素|説明|省略時|
|:--|:--|:--|
|label|イベントにつけるラベル。|省略不可|
|t|イベントの年月日|省略不可|
|color|イベントの色|black|

イベントのラベルは1〜3文字程度の短いものを使うのがおすすめです。


グラフの色は `red` のような web color 名、 `#ff00ff` や `#f0f` のような形式、 `rgb(0,0,255)` のような形式のいずれも OK です。
`border_color` は、メンバーカラーが白などの場合に指定してください。

年月日は、「2020年08月12日」や「2020.8.1」などの形式に対応します。年月日の順である必要があります。
いわゆる全角数字には対応します。
漢数字や英語の月名などには対応しません。

### 2. json を「ここに jsonファイルをドロップすると、在籍期間タイムライン画像を生成します。」のあたりにドロップする

上記の json ファイルをブラウザ上の「ここに jsonファイルをドロップすると、在籍期間タイムライン画像を生成します。」のあたりにドロップすると、下図のような画像が生成されます。

![上記の json によって作られる画像](affiliation-chart.png "在籍期間タイムライン画像")

### 3. PNG を取得する

出来上がった画像のあたりで右クリックをし、コピーなりダウンロードなりしてください。

URL に JSON にある情報と今日の日付が入ります。その URL を使うと同じ画像が得られます。

### 補足. ［画像を更新］ボタンでもよい

JSON が書かれているエディットボックスの下にある［画像を更新］ボタンを押すと、エディットボックスにあるテキストソースとしてグラフを再描画します。
